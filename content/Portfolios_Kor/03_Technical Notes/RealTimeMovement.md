# **RealTimeMovement**
---
## **κ°μ”**
μ΄ ν”„λ΅μ νΈλ” μμ—… κ³Όμ μ μΌν™μΌλ΅, μ κ³µλ **λ„¤νΈμ›ν¬ ν”„λ μ„μ›ν¬λ¥Ό ν™•μ¥ν•μ—¬ ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κ°„ μ›€μ§μ„ λ™κΈ°ν™”**, **μ…λ ¥ μ²λ¦¬**, κ·Έλ¦¬κ³  **μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ–‘μ½μ λ…λ Ή μ†΅μμ‹  μ‹μ¤ν…**μ„ μ§μ ‘ κµ¬ν„ν–μµλ‹λ‹¤. μ‹¤μ‹κ°„ λ©€ν‹°ν”λ μ΄ μƒνΈμ‘μ©μ— μ ν•©ν• **λ°μ‘μ„± λ†’κ³  λ¨λ“ν™”λ μ„¤κ³„**λ¥Ό κµ¬μ¶•ν•λ”λ° μ¤‘μ μ„ λ‘μ—μµλ‹λ‹¤.

![[RealTimeMovement (Media)#^5a7686]]

[**View Repository**](https://github.com/Woo95/RealTimeMovement)

---
## **ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ λ…λ Ή μ²λ¦¬ μ‹μ¤ν… μ„¤κ³„λ„**
![[Client-Server Command Processing System Diagram_Kor.png]]
- **ν°μƒ‰ ν…λ‘λ¦¬**: μ²λ¦¬ νλ¦„
- **λ…Έλ€μƒ‰ ν…λ‘λ¦¬**: λ„¤νΈμ›ν¬ κ΄€λ ¨ ν΄λμ¤
---
## **π–§ μ„λ²„ ν•µμ‹¬ κµ¬μ„± μ”μ†**

### `1. GameLogic ν΄λμ¤`
`NetworkServerProcessing`μ—μ„ νΈμ¶λλ” **ν•µμ‹¬ νΈμ ν•¨μλ¥Ό μ κ³µν•λ©° μ„λ²„μ ν”λ μ΄μ–΄ μƒνƒλ¥Ό κ΄€λ¦¬**ν•©λ‹λ‹¤. λ©”μ‹μ§€λ¥Ό μ§μ ‘ μ²λ¦¬ν•μ§€ μ•κ³ , μ—°κ²°λ ν”λ μ΄μ–΄ λ©λ΅μ„ μ μ§€ν•λ©°, μƒλ΅ μ ‘μ†ν• ν΄λΌμ΄μ–ΈνΈμ— κ³ μ  `seed`λ¥Ό ν• λ‹Ήν•κ³ , μ—°κ²°, μ—°κ²° ν•΄μ , μ΄λ™ κ°™μ€ λ°νƒ€μ„ μ΄λ²¤νΈ κ°±μ‹ μ„ μ„ν• λ°μ΄ν„° μ΅°νλ¥Ό μ§€μ›ν•©λ‹λ‹¤.

ν”λ μ΄μ–΄ λ“±λ΅, μ κ±°, μ΅°νλ¥Ό μ„ν• **μ„λ²„ μΈ΅ ν•¨μλ¥Ό μ κ³µ**ν•©λ‹λ‹¤.
![[RealTimeMovement (Code)#^201a55]]

- **ν•µμ‹¬ ν•¨μλ“¤**
	- [[RealTimeMovement (Code)#^fc9c2b|PlayerData Add(int clientConnectionID)]]:
		- μƒ ν΄λΌμ΄μ–ΈνΈκ°€ μ—°κ²°λ  λ• νΈμ¶λ©λ‹λ‹¤. κ³ μ ν• `seed`λ¥Ό ν• λ‹Ήν•κ³  μ ‘μ† μ„Έμ… λ©λ΅μ— ν”λ μ΄μ–΄λ¥Ό λ“±λ΅ν•©λ‹λ‹¤. μ΄κΈ°ν™” κ³Όμ •μ—μ„ `NetworkServerProcessing`μ— μν•΄ νΈμ¶λ©λ‹λ‹¤.
	- [[RealTimeMovement (Code)#^e4f3d1|PlayerData Remove(int clientConnectionID)]]:
		- μ ‘μ†ν• ν΄λΌμ΄μ–ΈνΈμ μ—°κ²° ν•΄μ  μ‹ νΈμ¶λ©λ‹λ‹¤. μ ‘μ† μ„Έμ… λ©λ΅μ—μ„ ν”λ μ΄μ–΄λ¥Ό μ°Ύμ•„ μ κ±°ν•λ©°, `NetworkServerProcessing`μ΄ κ²μ„ μƒνƒλ¥Ό κ°±μ‹ ν•  λ• μ‚¬μ©λ©λ‹λ‹¤.
	- [[RealTimeMovement (Code)#^52ae28|PlayerData Search(int playerSeed)]]:
		- κ³ μ ν• `seed`λ¥Ό κΈ°μ¤€μΌλ΅ ν”λ μ΄μ–΄λ¥Ό μ°Ύμ•„ λ°ν™ν•©λ‹λ‹¤. μ„λ²„κ°€ κ²μ„ ν”λ μ΄ μ¤‘, μ΄λ™μ΄λ‚ μ…λ ¥μ„ κ°±μ‹  λ° μ μ©ν•  λ• μ‚¬μ©λ©λ‹λ‹¤.

---
### `2. NetworkServerProcessing ν΄λμ¤`
μ„λ²„ μΈ΅μ ν•µμ‹¬ **λ…λ Ήμ–΄ μ²λ¦¬κΈ°** μ—­ν• μ„ ν•©λ‹λ‹¤. μ΄ μ •μ  ν΄λμ¤λ” **μ—°κ²°λ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό λ°›μ•„ μ²λ¦¬**ν•κ³ , **ν”„λ΅ν† μ½ μ‹λ³„μλ¥Ό λ¶„μ„ν•μ—¬ μ μ ν• λ΅μ§μ„ μ‹¤ν–‰**ν•©λ‹λ‹¤. μ—°κ²°, μ—°κ²° ν•΄μ , μ΄λ™ κ°™μ€ μƒνƒλ¥Ό κ°±μ‹ ν•λ„λ΅ `GameLogic`κ³Ό μ—°κ³„ν•©λ‹λ‹¤.

ν”„λ΅ν† μ½ λ©”μ‹μ§€λ¥Ό λ¶„μ„ν•κ³  κ²½λ΅λ¥Ό μ§€μ •ν•λ©° μ „λ‹¬ν•λ” **μ¤‘μ•™ κ΄€λ¦¬ ν•¨μ**λ¥Ό μ κ³µν•©λ‹λ‹¤.
![[RealTimeMovement (Code)#^d082db]]

- **ν•µμ‹¬ ν•¨μ** 
	![[RealTimeMovement (Code)#^95f0c7]]
**ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° μμ‹ λ λ©”μ‹μ§€λ¥Ό μ²λ¦¬**ν•κ³ , μ‹λ³„μλ¥Ό λ¶„μ„ν•΄ μ‹¤μ‹κ°„ μ„λ²„ μΈ΅ λ…λ Ήμ„ μ‹¤ν–‰ν•©λ‹λ‹¤. μ„Έμ… λ° μ΄λ™μ„ κ°±μ‹  λ° μ μ©ν•κΈ° μ„ν•΄ `GameLogic`κ³Ό μ—°κ³„ν•©λ‹λ‹¤.

---
## **π® ν΄λΌμ΄μ–ΈνΈ ν•µμ‹¬ κµ¬μ„± μ”μ†**
### `1. GameLogic ν΄λμ¤`
`NetworkClientProcessing`μ—μ„ νΈμ¶λλ” ν•µμ‹¬ κ²μ„ν”λ μ΄ μ²λ¦¬ ν•¨μλ¥Ό μ κ³µν•μ—¬ **ν΄λΌμ΄μ–ΈνΈμ—μ„ ν”λ μ΄μ–΄ κ°μ²΄ μƒνƒλ¥Ό κ΄€λ¦¬**ν•©λ‹λ‹¤. λ©”μ‹μ§€λ¥Ό μ§μ ‘ λ¶„μ„ν•κΈ°λ³΄λ‹¤λ”, μ„λ²„ μ§€μ‹μ— λ”°λΌ μƒμ„±λ ν”λ μ΄μ–΄λ¥Ό κ΄€λ¦¬ν•κ³  μ„μΉλ¥Ό κ°±μ‹ ν•λ©° μ—°κ²° ν•΄μ  μ‹ μ κ±°ν•λ” μ—­ν• μ„ ν•©λ‹λ‹¤.

ν”λ μ΄μ–΄μ μƒμ„±, λ™κΈ°ν™”, μ κ±°λ¥Ό μ„ν• **ν΄λΌμ΄μ–ΈνΈ μΈ΅ ν•¨μλ¥Ό μ κ³µ**ν•©λ‹λ‹¤.
![[RealTimeMovement (Code)#^ae6818]]

- **ν•µμ‹¬ ν•¨μλ“¤**
	- [[RealTimeMovement (Code)#^d888d2|void SpawnMySelf(int mySeed, Vector3 position)]]:
		- μ§€μ •λ μ„μΉμ— λ΅μ»¬ ν”λ μ΄μ–΄λ¥Ό μƒμ„±ν•κ³  κ³ μ ν• `seed`λ¥Ό ν• λ‹Ήν•©λ‹λ‹¤.
	- [[RealTimeMovement (Code)#^1f211d|void SpawnOthers(int otherSeed, Vector3 position)]]:
		- λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈλ¥Ό μ„ν• μ›κ²© ν”λ μ΄μ–΄λ¥Ό μƒμ„±ν•κ³  μ§€μ •λ `seed`λ¥Ό ν• λ‹Ήν•©λ‹λ‹¤.
	- [[RealTimeMovement (Code)#^3cb25e|void MovePlayer(int movedPlayerSeed, Vector3 targetPos)]]:
		- μ„λ²„μ—μ„ λ™κΈ°ν™”λ μΆν‘λ΅ μ›κ²© ν”λ μ΄μ–΄μ μ„μΉλ¥Ό κ°±μ‹ ν•©λ‹λ‹¤.
		- **Type A**: μ…λ ¥ μƒνƒμ™€ μƒκ΄€μ—†μ΄ **μ •ν•΄μ§„ κ³ μ • μ£ΌκΈ°**λ΅ μ΄λ™ μ •λ³΄λ¥Ό μ „μ†΅ν•©λ‹λ‹¤.
	- [[RealTimeMovement (Code)#^a84f81|void MovePlayer(int movedPlayerSeed, Vector3 targetPos, Vector2 inputKeys)]]:
		- μ›κ²© ν”λ μ΄μ–΄μ μ„μΉ λ° λ°©ν–¥ μ…λ ¥μ„ λ¨λ‘ κ°±μ‹ ν•©λ‹λ‹¤.
		- **Type B**: μ…λ ¥ λ³€ν™”κ°€ μμ„ λ•λ§ μƒνƒλ¥Ό κ°±μ‹ ν•΄ **λ„¤νΈμ›ν¬ νΈλν”½μ„ κ°μ†**μ‹ν‚µλ‹λ‹¤.
	- [[RealTimeMovement (Code)#^068ad0|void OtherPlayerLeft(int leftPlayerSeed)]]:
	    - `seed` μ‹λ³„μλ¥Ό μ΄μ©ν•΄ μ—°κ²° ν•΄μ λ ν”λ μ΄μ–΄μ μ¤λΈμ νΈλ¥Ό μ”¬μ—μ„ μ κ±°ν•©λ‹λ‹¤.
---
### `2. NetworkClientProcessing Class`
ν΄λΌμ΄μ–ΈνΈ μΈ΅μ **ν•µμ‹¬ λ…λ Ή μ²λ¦¬κΈ° μ—­ν• **μ„ ν•©λ‹λ‹¤. μ΄ μ •μ  ν΄λμ¤λ” μ„λ²„λ΅λ¶€ν„° λ©”μ‹μ§€λ¥Ό λ°›μ•„ **ν”„λ΅ν† μ½ μ‹λ³„μλ¥Ό λ¶„μ„ν•μ—¬ μ μ ν• κ²μ„ λ΅μ§μ„ μ‹¤ν–‰**ν•©λ‹λ‹¤. μ„λ²„ κΈ°λ° μƒνƒ λ³€κ²½μ— λ§μ¶° ν”λ μ΄μ–΄λ¥Ό μƒμ„±, λ™κΈ°ν™”, μ κ±°ν•κΈ° μ„ν•΄ `GameLogic`κ³Ό μ—°κ³„ν•μ—¬ λ™μ‘ν•©λ‹λ‹¤.

ν”„λ΅ν† μ½ λ©”μ‹μ§€λ¥Ό λ¶„μ„ν•κ³  κ²½λ΅λ¥Ό μ§€μ •ν•λ©° μ „λ‹¬ν•λ” **μ¤‘μ•™ κ΄€λ¦¬ ν•¨μ**λ¥Ό μ κ³µν•©λ‹λ‹¤.
![[RealTimeMovement (Code)#^ac80a7]]
- **ν•µμ‹¬ ν•¨μ**
  ![[RealTimeMovement (Code)#^d87cc9]]
**μ„λ²„λ΅λ¶€ν„° μμ‹ λ λ©”μ‹μ§€λ¥Ό μ²λ¦¬**ν•κ³ , μ‹λ³„μλ¥Ό λ¶„μ„ν•΄ ν΄λΌμ΄μ–ΈνΈ μΈ΅μ— μ μ©ν•©λ‹λ‹¤. μƒμ„±, μ΄λ™, ν”λ μ΄μ–΄ μ κ±°λ¥Ό μ„ν•΄ `GameLogic`κ³Ό μ—°κ³„ν•©λ‹λ‹¤.
> β οΈ μ°Έκ³ : λ΅μ§μ€ μƒλµλμ–΄ μμµλ‹λ‹¤. μ „μ²΄ κµ¬ν„μ€ [**repository**](https://github.com/Woo95/RealTimeMovement)μ—μ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

---
## **λ§Ίλ” λ§**
> μ΄ ν”„λ΅μ νΈλ” **λ¨λ“ν™”λ ν”„λ΅ν† μ½ κΈ°λ°**μ **μ‹¤μ‹κ°„ λ©€ν‹°ν”λ μ΄μ–΄ λ™κΈ°ν™” λ°©μ‹**μ„ λ³΄μ—¬μ¤λ‹λ‹¤. **μ„λ²„-ν΄λΌμ΄μ–ΈνΈ κ°„ λ΅μ§μ„ μΌμΉ**μ‹ν‚¤κ³  **λ…ν™•ν• λ©”μ‹μ§€ μ²λ¦¬ λ°©μ‹**μ„ ν†µν•΄, **ν™•μ¥ κ°€λ¥ν•κ³  λ°μ‘μ„±μ΄ λ›°μ–΄λ‚ ν”λ μ΄μ–΄ μ΄λ™ μ‹μ¤ν…μ νƒ„νƒ„ν• κΈ°λ°μ„ μ κ³µ**ν•©λ‹λ‹¤. λν• **ν΄λΌμ΄μ–ΈνΈ-μ„λ²„ κµ¬μ„±**κ³Ό **μ‹¤μ‹κ°„ κ²μ„ μ„¤κ³„μ κΈ°λ³Έ κ°λ…**μ— λ€ν• μ  μ΄ν•΄λ¥Ό λ°μν–μµλ‹λ‹¤.